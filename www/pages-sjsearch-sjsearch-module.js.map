{"version":3,"sources":["webpack:///./src/app/pages/sjsearch/sjsearch.module.ts","webpack:///./src/app/pages/sjsearch/sjsearch.page.html","webpack:///./src/app/pages/sjsearch/sjsearch.page.scss","webpack:///./src/app/pages/sjsearch/sjsearch.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;GAMG;AACsC;AACM;AACF;AACU;AAEV;AAEE;AACyB;AAExE,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,2DAAY;KACxB;CACF,CAAC;AAYF;IAAA;IAAiC,CAAC;IAArB,kBAAkB;QAV9B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,qFAAgB;gBAChB,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE,CAAC,2DAAY,CAAC;SAC7B,CAAC;OACW,kBAAkB,CAAG;IAAD,yBAAC;CAAA;AAAH;;;;;;;;;;;;AClC/B,2jC;;;;;;;;;;;ACAA,iCAAiC,gCAAgC,+BAA+B,iCAAiC,0BAA0B,kBAAkB,EAAE,+CAA+C,ujB;;;;;;;;;;;;;;;;;;;;;ACA9N;;;;;;GAMG;AAC0D;AACG;AACP;AACG;AACI;AAMhE;IAOE,sBAAoB,GAAkB,EAAU,KAAa,EACnD,IAAiB,EAAU,WAA2B,EAAU,MAAqB;QAD3E,QAAG,GAAH,GAAG,CAAe;QAAU,UAAK,GAAL,KAAK,CAAQ;QACnD,SAAI,GAAJ,IAAI,CAAa;QAAU,gBAAW,GAAX,WAAW,CAAgB;QAAU,WAAM,GAAN,MAAM,CAAe;IAAI,CAAC;IAEpG,+BAAQ,GAAR;QACE,IAAI,CAAC,MAAM,CAAC,kBAAkB,EAAE,CAAC;QACjC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,CAAC;QACrD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC/B,IAAI,CAAC,OAAO,GAAG;YACb,IAAI,EAAE,CAAC;YACP,SAAS,EAAE,EAAE;SACd,CAAC;IACJ,CAAC;IACD,uCAAgB,GAAhB;QACE,IAAI,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC;IAClC,CAAC;IACD,6BAAM,GAAN;QACE,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;IAClB,CAAC;IACD;;;;;;OAMG;IACH,+BAAQ,GAAR,UAAS,KAAK;QACZ,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAChC,IAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;QAChC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QACrB,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,KAAK,CAAC;SACd;aAAM;YACL,IAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,KAAK,CAAC;SACtC;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IACD;;;;;;OAMG;IACH,8BAAO,GAAP,UAAQ,KAAM;QAAd,iBAwBC;QAvBC,IAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,EAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QACxF,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,aAAG;;YAC9D,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC;YAChB,IAAI,KAAI,CAAC,QAAQ,EAAE;gBACjB,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;aACvB;YACD,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACnC,WAAI,CAAC,IAAI,EAAC,IAAI,WAAI,GAAG,CAAC,MAAM,CAAC,EAAE;aAChC;YACD,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;gBAClE,KAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,IAAI,CAAC;aACrC;YACD,IAAI,KAAK,EAAE;gBACT,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;aACzB;QACH,CAAC,EAAE,cAAI;YACL,IAAI,KAAK,EAAE;gBACT,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;aACzB;YACD,IAAI,KAAI,CAAC,QAAQ,EAAE;gBACjB,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;aACvB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD;;;;;;OAMG;IACH,+BAAQ,GAAR,UAAS,KAAK;QACZ,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;QACvB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC;IACD,mCAAY,GAAZ,UAAc,MAAM;QAClB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACpB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,EAAE,CAAC;IACzC,CAAC;IACD,2BAAI,GAAJ,UAAK,EAAE;QACL,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE;YACrB,OAAO,KAAK,CAAC;SACd;QACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,iBAAiB,CAAC,EAAE,EAAC,WAAW,EAAE,EAAC,EAAE,MAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAC,EAAC,CAAC,CAAC;IACrF,CAAC;IA5F6B;QAA7B,+DAAS,CAAC,gEAAiB,CAAC;wEAAiB,gEAAiB;wDAAC;IANrD,YAAY;QALxB,+DAAS,CAAC;YACT,QAAQ,EAAE,cAAc;YACxB,wGAAmC;;SAEpC,CAAC;+EAQyB,4DAAa,EAAiB,sDAAM;YAC7C,yEAAW,EAAuB,8DAAc,EAAkB,6EAAa;OARpF,YAAY,CAmGxB;IAAD,mBAAC;CAAA;AAnGwB","file":"pages-sjsearch-sjsearch-module.js","sourcesContent":["/*\n * @Author: wjy-mac\n * @Date: 2019-08-07 23:04:49\n * @LastEditors: wjy-mac\n * @LastEditTime: 2019-08-07 23:28:01\n * @Description: file content\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SjsearchPage } from './sjsearch.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SjsearchPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [SjsearchPage]\n})\nexport class SjsearchPageModule {}\n","module.exports = \"<!--\\n * @Author: wjy-mac\\n * @Date: 2019-08-07 23:04:49\\n * @LastEditors: wjy-mac\\n * @LastEditTime: 2019-11-14 12:09:28\\n * @Description: file content\\n -->\\n<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-buttons slot=\\\"start\\\" mode=\\\"ios\\\">\\n      <ion-button (click)=\\\"goBack()\\\" mode=\\\"ios\\\">\\n        <ion-icon mode=\\\"ios\\\" name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <!--<ion-title>账单</ion-title>-->\\n    <ion-searchbar mode=\\\"ios\\\" showCancelButton=\\\"focus\\\" (ionChange)=\\\"searchFn($event)\\\" cancelButtonText=\\\"取消\\\"  placeholder=\\\"输入关键词搜索\\\"></ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <app-productlist *ngFor=\\\"let item of list\\\" [data]=\\\"item\\\" (open)=\\\"goodsContent($event)\\\"></app-productlist>\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n      <ion-infinite-scroll-content\\n         loadingSpinner=\\\"crescent\\\"\\n         loadingText=\\\"加载更多...\\\">\\n      </ion-infinite-scroll-content>\\n    </ion-infinite-scroll>\\n</ion-content>\\n\"","module.exports = \"ion-searchbar {\\n  --cancel-button-color: #fff;\\n  --clear-button-color: #fff;\\n  --placeholder-color: #f1f1f1;\\n  --icon-color: #f1f1f1;\\n  --color: #fff; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93ankvRGVza3RvcC9seGovc3JjL2FwcC9wYWdlcy9zanNlYXJjaC9zanNlYXJjaC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwyQkFBc0I7RUFDdEIsMEJBQXFCO0VBQ3JCLDRCQUFvQjtFQUNwQixxQkFBYTtFQUNiLGFBQVEsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3Nqc2VhcmNoL3Nqc2VhcmNoLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1zZWFyY2hiYXIge1xuICAtLWNhbmNlbC1idXR0b24tY29sb3I6ICNmZmY7XG4gIC0tY2xlYXItYnV0dG9uLWNvbG9yOiAjZmZmO1xuICAtLXBsYWNlaG9sZGVyLWNvbG9yOiAjZjFmMWYxO1xuICAtLWljb24tY29sb3I6ICNmMWYxZjE7XG4gIC0tY29sb3I6ICNmZmY7XG59Il19 */\"","/*\n * @Author: wjy-mac\n * @Date: 2019-08-07 23:04:49\n * @LastEditors: wjy-mac\n * @LastEditTime: 2019-08-07 23:51:49\n * @Description: file content\n */\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport {NavController, IonInfiniteScroll} from '@ionic/angular';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HttpService } from 'src/app/services/http.service';\nimport { NativeService } from 'src/app/services/native.service';\n@Component({\n  selector: 'app-sjsearch',\n  templateUrl: './sjsearch.page.html',\n  styleUrls: ['./sjsearch.page.scss'],\n})\nexport class SjsearchPage implements OnInit {\n  list: object[];\n  isSearch: boolean; // 是否正在搜索\n  suppId: string; // 商家id\n  pageObj: object;\n  keywords: string; // 搜索关键词\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\n  constructor(private nav: NavController, private route: Router,\n    private http: HttpService, private activeroute: ActivatedRoute, private native: NativeService) { }\n\n  ngOnInit() {\n    this.native.setStatusbardefalt();\n    this.list = [];\n    const params = this.activeroute.snapshot.queryParams;\n    this.suppId = params['suppid'];\n    this.pageObj = {\n      page: 1,\n      page_size: 20\n    };\n  }\n  ionViewWillLeave() {\n    this.native.setStatusbarnomal();\n  }\n  goBack(): void {\n    this.nav.back();\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 搜索\n   * @param {type} \n   * @return: \n   * @Date: 2019-08-07 23:29:16\n   */\n  searchFn(event) {\n    console.log(event.detail.value);\n    const data = event.detail.value;\n    this.keywords = data;\n    this.list.length = 0;\n    if (!data) {\n      return false;\n    } else {\n      this.infiniteScroll.disabled = false;\n    }\n    this.isSearch = true;\n    this.getList();\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 搜索 请求\n   * @param {type} text 搜索关键词 event? 滚动加载对象\n   * @return: \n   * @Date: 2019-08-07 23:34:49\n   */\n  getList(event?) {\n    const obj = Object.assign({suppId: this.suppId, keywords: this.keywords}, this.pageObj);\n    this.http.getData(this.http.getsjsearchgoods, obj).subscribe(res => {\n      console.log(res)\n      if (this.isSearch) {\n        this.isSearch = false;\n      }\n      if (res.data && res.data.length > 0) {\n        this.list.push(...res['data']);\n      }\n      if (!res['data'] || res['data'].length < this.pageObj['page_size']) {\n        this.infiniteScroll.disabled = true;\n      }\n      if (event) {\n        event.target.complete();\n      }\n    }, err2 => {\n      if (event) {\n        event.target.complete();\n      }\n      if (this.isSearch) {\n        this.isSearch = false;\n      }\n    });\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 滚动加载\n   * @param {type} \n   * @return: \n   * @Date: 2019-08-07 23:39:55\n   */\n  loadData(event) {\n    this.pageObj['page']++;\n    this.getList(event);\n  }\n  goodsContent ($event) {\n    console.log($event);\n    this.open($event.goods_id || $event.id)\n  }\n  open(id) {\n    if (isNaN(Number(id))) {\n      return false;\n    }\n    this.route.navigate(['/productcontent'], {queryParams: {id, suppid: this.suppId}});\n  }\n}\n"],"sourceRoot":""}