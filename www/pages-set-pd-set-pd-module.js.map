{"version":3,"sources":["./src/app/pages/set-pd/set-pd.page.html","./src/app/pages/set-pd/set-pd.module.ts","./src/app/pages/set-pd/set-pd.page.scss","./src/app/pages/set-pd/set-pd.page.ts"],"names":[],"mappings":"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","file":"pages-set-pd-set-pd-module.js","sourcesContent":["export default \"<!--\\n * @Author: wjy-mac\\n * @Date: 2019-11-18 09:52:37\\n * @LastEditors: wjy-mac\\n * @LastEditTime: 2019-11-21 00:44:35\\n * @Description: file content\\n -->\\n<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"goBack()\\\">\\n        <ion-icon mode=\\\"ios\\\" name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>重置密码</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <div class=\\\"form-center\\\">\\n    <ion-list>\\n      <ion-item>\\n          <ion-input placeholder=\\\"请输入手机号\\\" type=\\\"tel\\\" [disabled]=\\\"type === 2\\\" [(ngModel)]=\\\"formData.tel\\\" minlength=\\\"11\\\" required #name=\\\"ngModel\\\"></ion-input>\\n      </ion-item>\\n      <ion-item>\\n        <div class=\\\"my-input\\\">\\n          <input type=\\\"text\\\" placeholder=\\\"请输入验证码\\\" [disabled]=\\\"!formData.tel\\\" [(ngModel)]=\\\"formData.yzm\\\" #yzm=\\\"ngModel\\\" required>\\n          <button class=\\\"ion-float-right\\\" [disabled]=\\\"isGetyzm || !formData.tel || formData.tel.toString().length != 11\\\" [ngClass]=\\\"{noclick: !formData.tel || formData.tel.toString().length != 11}\\\" (click)=\\\"getYzm()\\\">{{yzmText}}</button>\\n        </div>\\n      </ion-item>\\n      <ion-item>\\n        <ion-input placeholder=\\\"请输入新密码\\\" type=\\\"password\\\" minlength=\\\"6\\\" [(ngModel)]=\\\"formData.pwd\\\" #pwd=\\\"ngModel\\\" required></ion-input>\\n      </ion-item>\\n    </ion-list>\\n    <app-mybutton [isdisabled]=\\\"isLoading || name.invalid || formData.pwd.length < 6 || !formData.yzm\\\" [bname]=\\\"'提交'\\\" minlength=\\\"6\\\" [isblock]=\\\"true\\\" (subClick)=\\\"sub()\\\"></app-mybutton>\\n    \\n    <ion-progress-bar *ngIf=\\\"isLoading\\\" type=\\\"indeterminate\\\" reversed=\\\"true\\\"></ion-progress-bar>\\n  </div>\\n</ion-content>\\n\"","/*\n * @Author: wjy-mac\n * @Date: 2019-11-18 09:52:37\n * @LastEditors: wjy-mac\n * @LastEditTime: 2019-11-18 10:16:11\n * @Description: file content\n */\nimport { ComponentsModule } from './../../components/components.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SetPdPage } from './set-pd.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SetPdPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [SetPdPage]\n})\nexport class SetPdPageModule {}\n","export default \".form-center img {\\n  width: 17px;\\n}\\n\\n.my-input {\\n  background: rgba(255, 255, 255, 0.2);\\n  height: 41px;\\n  border-radius: 20px;\\n  width: 100%;\\n}\\n\\n.my-input input {\\n  height: 41px;\\n  box-sizing: border-box;\\n  background: none;\\n  border: none;\\n  color: var(--ion-color-dark);\\n  outline: none;\\n  width: calc(100% - 100px);\\n}\\n\\n.my-input input::-webkit-input-placeholder {\\n  color: #7d7d7d;\\n}\\n\\n.my-input button {\\n  font-size: var(--ion-text);\\n  height: 41px;\\n  background: none;\\n  border: none;\\n  outline: none;\\n  color: var(--ion-color-secondary);\\n  width: 100px;\\n}\\n\\n.my-input button:active {\\n  color: var(--ion-color-secondary-shade);\\n}\\n\\n.noclick {\\n  color: rgba(0, 0, 0, 0.3) !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93ankvRGVza3RvcC9seGovc3JjL2FwcC9wYWdlcy9zZXQtcGQvc2V0LXBkLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvc2V0LXBkL3NldC1wZC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0U7RUFDRSxXQUFBO0FDQUo7O0FER0E7RUFDRSxvQ0FBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtFQUNBLFdBQUE7QUNBRjs7QURFRTtFQUNFLFlBQUE7RUFJQSxzQkFBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtFQUNBLDRCQUFBO0VBQ0EsYUFBQTtFQUNBLHlCQUFBO0FDREo7O0FERUk7RUFDRSxjQUFBO0FDQU47O0FER0U7RUFDRSwwQkFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0EsaUNBQUE7RUFDQSxZQUFBO0FDREo7O0FERUk7RUFDRSx1Q0FBQTtBQ0FOOztBRElBO0VBQ0Usb0NBQUE7QUNERiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3NldC1wZC9zZXQtcGQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmZvcm0tY2VudGVyIHtcbiAgaW1nIHtcbiAgICB3aWR0aDogMTdweDtcbiAgfVxufVxuLm15LWlucHV0IHtcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwuMik7XG4gIGhlaWdodDo0MXB4O1xuICBib3JkZXItcmFkaXVzOiAyMHB4O1xuICB3aWR0aDogMTAwJTtcbiAgLy8gbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgaW5wdXQge1xuICAgIGhlaWdodDogNDFweDtcbiAgICAvLyBwYWRkaW5nOiAxNXB4O1xuICAgIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhcmspO1xuICAgIG91dGxpbmU6IG5vbmU7XG4gICAgd2lkdGg6IGNhbGMoMTAwJSAtIDEwMHB4KTtcbiAgICAmOjotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVyIHtcbiAgICAgIGNvbG9yOiAjN2Q3ZDdkO1xuICAgIH1cbiAgfVxuICBidXR0b24ge1xuICAgIGZvbnQtc2l6ZTogdmFyKC0taW9uLXRleHQpO1xuICAgIGhlaWdodDogNDFweDtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBvdXRsaW5lOiBub25lO1xuICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3Itc2Vjb25kYXJ5KTtcbiAgICB3aWR0aDogMTAwcHg7XG4gICAgJjphY3RpdmUge1xuICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnktc2hhZGUpO1xuICAgIH1cbiAgfVxufVxuLm5vY2xpY2sge1xuICBjb2xvcjogcmdiYSgwLDAsMCwuMykgIWltcG9ydGFudDtcbn0iLCIuZm9ybS1jZW50ZXIgaW1nIHtcbiAgd2lkdGg6IDE3cHg7XG59XG5cbi5teS1pbnB1dCB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTtcbiAgaGVpZ2h0OiA0MXB4O1xuICBib3JkZXItcmFkaXVzOiAyMHB4O1xuICB3aWR0aDogMTAwJTtcbn1cbi5teS1pbnB1dCBpbnB1dCB7XG4gIGhlaWdodDogNDFweDtcbiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGJvcmRlcjogbm9uZTtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYXJrKTtcbiAgb3V0bGluZTogbm9uZTtcbiAgd2lkdGg6IGNhbGMoMTAwJSAtIDEwMHB4KTtcbn1cbi5teS1pbnB1dCBpbnB1dDo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlciB7XG4gIGNvbG9yOiAjN2Q3ZDdkO1xufVxuLm15LWlucHV0IGJ1dHRvbiB7XG4gIGZvbnQtc2l6ZTogdmFyKC0taW9uLXRleHQpO1xuICBoZWlnaHQ6IDQxcHg7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGJvcmRlcjogbm9uZTtcbiAgb3V0bGluZTogbm9uZTtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnkpO1xuICB3aWR0aDogMTAwcHg7XG59XG4ubXktaW5wdXQgYnV0dG9uOmFjdGl2ZSB7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3Itc2Vjb25kYXJ5LXNoYWRlKTtcbn1cblxuLm5vY2xpY2sge1xuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjMpICFpbXBvcnRhbnQ7XG59Il19 */\"","import { NativeService } from 'src/app/services/native.service';\nimport { HttpService } from './../../services/http.service';\nimport { UserService } from './../../services/user.service';\nimport { Component, OnInit } from '@angular/core';\nimport { NavController, AlertController } from '@ionic/angular';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-set-pd',\n  templateUrl: './set-pd.page.html',\n  styleUrls: ['./set-pd.page.scss'],\n})\nexport class SetPdPage implements OnInit {\n  formData: any;\n  isLoading: boolean; // 是否正在请求\n  yzmText: string;  // 验证码文字\n  isGetyzm: boolean; // 是否正在请求验证码\n  type: number; // 1 登录处过来 2 个人中心过来\n  constructor(private nav: NavController, private userfn: UserService, private activeroute: ActivatedRoute,\n    private http: HttpService, public alertController: AlertController, private native: NativeService) { }\n\n  ngOnInit() {\n    this.isLoading = false;\n    this.yzmText = '获取验证码';\n    this.isGetyzm = false;\n    this.formData = {\n      tel: '',\n      pwd: '',\n      yzm: ''\n    };\n  }\n  ionViewWillEnter() {\n    console.log('进入2')\n    const params = this.activeroute.snapshot.queryParams;\n    this.type = params['type'] ? Number(params['type']) : 1;\n    if (this.type === 2) {\n      this.userfn.getUser().then(res => {\n        console.log(res);\n        this.formData.tel = res['mobile_phone'];\n      }).catch(err => {\n\n      });\n    }\n  }\n  goBack(): void {\n    this.nav.back();\n  }\n  getYzm() {\n    if (this.isGetyzm) {\n      return false;\n    }\n    this.isGetyzm = true;\n    this.http.getData(this.http.sendYzm, {'mobile_phone': this.formData.tel, 'type': 3}).subscribe(res => {\n      this.yzmText = '60';\n      const setInter = setInterval(() => {\n        if (this.yzmText === '0') {\n          clearInterval(setInter);\n          this.isGetyzm = false;\n          this.yzmText = '获取验证码';\n          return false;\n        }\n        this.yzmText = (Number(this.yzmText) - 1).toString();\n      }, 1000);\n    }, err => {\n      this.isGetyzm = false;\n    });\n  }\n  sub() {\n    const zz1 = /\\d+/;\n    const zz2 = /[a-z]+/i;\n    if (!zz1.test(this.formData.pwd)) {\n      this.native.presentAlert('密码需要包含字母和数字!');\n      return false;\n    }\n    if (!zz2.test(this.formData.pwd)) {\n      this.native.presentAlert('密码需要包含字母和数字!');\n      return false;\n    }\n    this.isLoading = true;\n    const obj = {\n      mobile: this.formData.tel,\n      password: this.formData.pwd,\n      code: this.formData.yzm\n    };\n    this.http.postformdataloading(this.http.resetPwd, obj).subscribe(res => {\n      this.isLoading = false;\n      this.setSuccess();\n    }, err2 => {\n      this.isLoading = false;\n    });\n  }\n  async setSuccess() {\n    const alert = await this.alertController.create({\n      header: '提示!',\n      message: '密码重置成功',\n      buttons: [\n        {\n          text: '确定',\n          handler: () => {\n            this.goBack();\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n}\n"],"sourceRoot":"webpack:///"}