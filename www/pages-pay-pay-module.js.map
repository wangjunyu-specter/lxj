{"version":3,"sources":["webpack:///./src/app/pages/pay/pay.module.ts","webpack:///./src/app/pages/pay/pay.page.html","webpack:///./src/app/pages/pay/pay.page.scss","webpack:///./src/app/pages/pay/pay.page.ts"],"names":[],"mappings":"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","file":"pages-pay-pay-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PayPage } from './pay.page';\r\nimport { ComponentsModule } from '../../components/components.module';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PayPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ComponentsModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [PayPage]\r\n})\r\nexport class PayPageModule {}\r\n","module.exports = \"<!--\\r\\n * @Author: wjy-mac\\r\\n * @Date: 2019-07-07 02:05:04\\r\\n * @LastEditors: wjy-mac\\r\\n * @LastEditTime: 2019-12-04 14:41:17\\r\\n * @Description: 支付页面\\r\\n -->\\r\\n<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <!--<ion-back-button></ion-back-button>-->\\r\\n      <ion-button (click)=\\\"goBack()\\\">\\r\\n        <ion-icon mode=\\\"ios\\\" name=\\\"arrow-back\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>收银台</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"pay-box\\\">\\r\\n    <div class=\\\"title\\\">支付剩余时间</div>\\r\\n    <div class=\\\"time\\\">\\r\\n      <div class=\\\"box\\\">0</div>\\r\\n      <div class=\\\"box\\\">0</div>:\\r\\n      <div class=\\\"box\\\">4</div>\\r\\n      <div class=\\\"box\\\">7</div>:\\r\\n      <div class=\\\"box\\\">3</div>\\r\\n      <div class=\\\"box\\\">2</div>\\r\\n    </div>\\r\\n    <div class=\\\"des\\\">支付成功后客服会与您取得联系</div>\\r\\n  </div>\\r\\n  <div class=\\\"order\\\" padding>\\r\\n    <div>\\r\\n      <div class=\\\"box\\\">订单号：</div>\\r\\n      <div class=\\\"box\\\">{{ordersn}}</div>\\r\\n    </div>\\r\\n    <div>\\r\\n      <div class=\\\"box\\\">应付金额:</div>\\r\\n      <div class=\\\"box\\\"><ion-text color=\\\"danger\\\">¥ {{price}}</ion-text></div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"yepay\\\" class=\\\"line\\\"></div>\\r\\n  <!-- <ion-list *ngIf=\\\"yepay\\\" inset=\\\"true\\\" line=\\\"none\\\"> -->\\r\\n  <ion-list *ngIf=\\\"yepay\\\" inset=\\\"true\\\" line=\\\"none\\\" style=\\\"display: none;\\\">\\r\\n    <ion-item>\\r\\n      <ion-label>使用余额</ion-label>\\r\\n      <ion-toggle [(ngModel)]=\\\"kysyye\\\" (ionChange)=\\\"setyenum()\\\" color=\\\"success\\\" [disabled]=\\\"isyepayend\\\"></ion-toggle>\\r\\n    </ion-item>\\r\\n    <ion-item lines=\\\"none\\\" *ngIf=\\\"kysyye\\\">\\r\\n      <ion-label>输入金额</ion-label>\\r\\n      <ion-input type=\\\"number\\\" mode=\\\"ios\\\" (ionChange)=\\\"setyechange()\\\" [disabled]=\\\"isyepayend\\\" [max]=\\\"yoursurplus\\\" min=\\\"0\\\" [(ngModel)]=\\\"syye\\\" color=\\\"success\\\"></ion-input>\\r\\n      <ion-note>元</ion-note>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <small>您当前的可用余额为{{yoursurplus}}</small>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n  <div class=\\\"line\\\"></div>\\r\\n  <div class=\\\"zftype\\\">\\r\\n    <ion-list>\\r\\n      <ion-radio-group [(ngModel)]=\\\"dataObj.payType\\\" (ionChange)=\\\"toggle()\\\">\\r\\n        <ion-list-header>\\r\\n          支付方式\\r\\n        </ion-list-header>\\r\\n        <ion-item *ngFor=\\\"let item of payList\\\">\\r\\n          <ion-label><img [src]=\\\"item.pay_code == 'alipay' ? './assets/zfb.svg' : './assets/wechartpay.svg'\\\" alt=\\\"\\\">{{item.pay_name}}</ion-label>\\r\\n          <ion-radio color=\\\"success\\\" value=\\\"{{item.pay_code}}\\\" mode=\\\"md\\\" checked></ion-radio>\\r\\n        </ion-item>\\r\\n      </ion-radio-group>\\r\\n    </ion-list>\\r\\n  </div>\\r\\n</ion-content>\\r\\n<ion-footer mode=\\\"ios\\\">\\r\\n  <ion-toolbar mode=\\\"ios\\\">\\r\\n    <app-footer [type]=\\\"2\\\" [allprice]=\\\"price\\\" (sub)=\\\"submit($event)\\\"></app-footer>\\r\\n  </ion-toolbar>\\r\\n</ion-footer>\\r\\n\"","module.exports = \".pay-box {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  margin-top: 20px; }\\n  .pay-box .time {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: center;\\n    align-items: center;\\n    font-size: var(--ion-title);\\n    margin: 10px 0; }\\n  .pay-box .time .box {\\n      width: 24px;\\n      height: 24px;\\n      background-color: #eff0f3;\\n      border-radius: 5px;\\n      display: flex;\\n      justify-content: center;\\n      align-items: center;\\n      margin-right: 3px;\\n      margin-left: 3px; }\\n  .pay-box .title, .pay-box .des {\\n    font-size: var(--ion-sm-text); }\\n  .pay-box .des {\\n    color: var(--ion-color-medium); }\\n  .order > div {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-items: center;\\n  font-size: var(--ion-title);\\n  color: var(--ion-color-dark);\\n  padding: 5px 0; }\\n  .line {\\n  height: 15px;\\n  background-color: var(--ion-gray-background-color); }\\n  .zftype ion-label {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: center; }\\n  .zftype img {\\n  width: 25px;\\n  margin-right: 10px; }\\n  ion-toolbar {\\n  --padding-bottom: 0;\\n  --padding-end: 0;\\n  --padding-start: 0;\\n  --padding-top: 0; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93ankvRGVza3RvcC9seGovc3JjL2FwcC9wYWdlcy9wYXkvcGF5LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixnQkFBZ0IsRUFBQTtFQUxsQjtJQU9JLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtJQUNuQiwyQkFBMkI7SUFDM0IsY0FBYyxFQUFBO0VBWmxCO01BY00sV0FBVztNQUNYLFlBQVk7TUFDWix5QkFBd0M7TUFHeEMsa0JBQWtCO01BQ2xCLGFBQWE7TUFDYix1QkFBdUI7TUFDdkIsbUJBQW1CO01BQ25CLGlCQUFpQjtNQUNqQixnQkFBZ0IsRUFBQTtFQXhCdEI7SUE0QkksNkJBQTZCLEVBQUE7RUE1QmpDO0lBK0JJLDhCQUE4QixFQUFBO0VBR2xDO0VBRUksYUFBYTtFQUNiLG1CQUFtQjtFQUNuQiw4QkFBOEI7RUFDOUIsbUJBQW1CO0VBQ25CLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIsY0FBYyxFQUFBO0VBR2xCO0VBQ0UsWUFBWTtFQUNaLGtEQUFrRCxFQUFBO0VBRXBEO0VBRUksYUFBYTtFQUNiLG1CQUFtQjtFQUNuQiwyQkFBMkI7RUFDM0IsbUJBQW1CLEVBQUE7RUFMdkI7RUFRSSxXQUFXO0VBQ1gsa0JBQWtCLEVBQUE7RUFHdEI7RUFDRSxtQkFBaUI7RUFDakIsZ0JBQWM7RUFDZCxrQkFBZ0I7RUFDaEIsZ0JBQWMsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3BheS9wYXkucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnBheS1ib3gge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgLnRpbWUge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBmb250LXNpemU6IHZhcigtLWlvbi10aXRsZSk7XHJcbiAgICBtYXJnaW46IDEwcHggMDtcclxuICAgIC5ib3gge1xyXG4gICAgICB3aWR0aDogMjRweDtcclxuICAgICAgaGVpZ2h0OiAyNHB4O1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIzOSwgMjQwLCAyNDMsIDEpO1xyXG4gICAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgIG1hcmdpbi1yaWdodDogM3B4O1xyXG4gICAgICBtYXJnaW4tbGVmdDogM3B4O1xyXG4gICAgfVxyXG4gIH1cclxuICAudGl0bGUsIC5kZXMge1xyXG4gICAgZm9udC1zaXplOiB2YXIoLS1pb24tc20tdGV4dCk7XHJcbiAgfVxyXG4gIC5kZXMge1xyXG4gICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xyXG4gIH1cclxufVxyXG4ub3JkZXIge1xyXG4gICY+ZGl2IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGZvbnQtc2l6ZTogdmFyKC0taW9uLXRpdGxlKTtcclxuICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFyayk7XHJcbiAgICBwYWRkaW5nOiA1cHggMDtcclxuICB9XHJcbn1cclxuLmxpbmUge1xyXG4gIGhlaWdodDogMTVweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pb24tZ3JheS1iYWNrZ3JvdW5kLWNvbG9yKTtcclxufVxyXG4uemZ0eXBlIHtcclxuICBpb24tbGFiZWwge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIH1cclxuICBpbWcge1xyXG4gICAgd2lkdGg6IDI1cHg7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbiAgfVxyXG59XHJcbmlvbi10b29sYmFyIHtcclxuICAtLXBhZGRpbmctYm90dG9tOiAwO1xyXG4gIC0tcGFkZGluZy1lbmQ6IDA7XHJcbiAgLS1wYWRkaW5nLXN0YXJ0OiAwO1xyXG4gIC0tcGFkZGluZy10b3A6IDA7XHJcbn1cclxuIl19 */\"","/*\r\n * @Author: wjy-mac\r\n * @Date: 2019-08-03 14:52:31\r\n * @LastEditors: wjy-mac\r\n * @LastEditTime: 2019-12-05 11:21:29\r\n * @Description: file content\r\n */\r\nimport { Component, OnInit } from '@angular/core';\r\nimport {AlertController, NavController, PopoverController} from '@ionic/angular';\r\nimport {HttpService} from '../../services/http.service';\r\nimport {PaymentListService} from '../../services/payment-list.service';\r\nimport {NativeService} from '../../services/native.service';\r\nimport {PayorderService} from '../../services/payorder.service';\r\nimport {UserService} from '../../services/user.service';\r\nimport {PayboxComponent} from '../../components/paybox/paybox.component';\r\nimport {Router} from \"@angular/router\";\r\nimport {OrdersuccessService} from \"../../services/ordersuccess.service\";\r\n\r\n@Component({\r\n  selector: 'app-pay',\r\n  templateUrl: './pay.page.html',\r\n  styleUrls: ['./pay.page.scss'],\r\n})\r\nexport class PayPage implements OnInit {\r\n  payType: number;\r\n  dataObj: any;\r\n  payList: any[];\r\n  yepay: any;\r\n  kysyye: boolean; // 是否使用余额支付\r\n  yoursurplus: number;\r\n  syye: any;\r\n  price: number;\r\n  orderData: any;\r\n  ordersn: string;\r\n  orderId: number;\r\n  isyepayend: boolean;\r\n  addtime: number;\r\n  constructor(private nav: NavController, private http: HttpService,\r\n              private paymentlist: PaymentListService, private native: NativeService,\r\n              private payorder: PayorderService, private userfn: UserService,\r\n              public popoverController: PopoverController, private route: Router,\r\n              public alertController: AlertController, private orderdatafn: OrdersuccessService) { }\r\n\r\n  ngOnInit() {\r\n    this.isyepayend = false;\r\n    this.yoursurplus = 3000;\r\n    this.price = 300;\r\n    this.dataObj = {\r\n      payType: '1'\r\n    };\r\n    this.orderData = this.payorder.getOrder();\r\n    console.log(this.orderData);\r\n    if (!this.orderData) {\r\n      this.backfn();\r\n    } else {\r\n      const order = this.orderData.order;\r\n      this.price = order.order_amount;\r\n      this.ordersn = order.order_sn;\r\n      this.orderId = order.order_id;\r\n      this.addtime = order.add_time;\r\n    }\r\n    // this.http.getData(this.http.getpaymentlist).subscribe(res => {\r\n    //   console.log(res);\r\n    // });\r\n  }\r\n  ionViewDidEnter() {\r\n    this.paymentlist.getHlist().then(res => {\r\n      this.payList = res;\r\n      this.dataObj.payType = this.payList[0].pay_code;\r\n      this.yepay = this.paymentlist.getyepay();\r\n    });\r\n    this.userfn.getUserp().then(res => {\r\n      this.yoursurplus = res.user_money;\r\n    }).catch(err2 => {});\r\n  }\r\n  toggle() {\r\n    console.log(this.dataObj.payType);\r\n  }\r\n  setyenum() {\r\n    if (!this.syye) {\r\n      const ye = Number(this.yoursurplus);\r\n      const price = Number(this.price)\r\n      this.syye = ye > price ? price : ye;\r\n    }\r\n  }\r\n  async submit($event) {\r\n    const surplus = this.kysyye ? this.syye : 0;\r\n\r\n    if (false) { // surplus > 0 && !this.isyepayend\r\n      const pwd = await this.syyepay(); // 获取密码\r\n      console.log(pwd)\r\n      if (!pwd) {\r\n        return false;\r\n      } else {\r\n\r\n        let kypay = false; // 余额支付是否成功\r\n        try {\r\n          kypay = await this.checksurplus(pwd) as any;\r\n        } catch (err2) {\r\n          kypay = false;\r\n        }\r\n        if (!kypay) {\r\n          return false;\r\n        }\r\n        this.isyepayend = true;\r\n        console.log(this.syye )\r\n        if (surplus == this.price) {\r\n          this.isyepayend = false;\r\n          this.gotosucess();\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    this.payfn();\r\n  }\r\n  payfn() {\r\n    const pay_code = this.dataObj.payType;\r\n    const order_sn = this.ordersn;\r\n    const order_id = this.orderId;\r\n    console.log(order_sn);\r\n    this.http.postformdataloading(this.http.acteditpayment, {order_id, pay_code, is_pay: 1}).subscribe(res => {\r\n      let gopay = true;\r\n      const ispay = () => {\r\n        setTimeout(() => {\r\n          if (gopay) {\r\n            this.http.postformdataloading(this.http.acteditpayment2, {order_id}).subscribe(res => {\r\n              this.gotosucess();\r\n            }, err => {\r\n              this.native.presentToast('支付失败!');\r\n            });\r\n          }\r\n          document.removeEventListener(\"resume\", ispay, false);\r\n        }, 1500);\r\n      };\r\n      document.addEventListener(\"resume\", ispay, false);\r\n\r\n      if (pay_code == 'alipay'){\r\n        this.native.alipayment(res.result).then(res => {\r\n          this.getHttpayend(order_id, order_sn);\r\n        }).catch(err => {\r\n          this.native.presentToast('支付失败!');\r\n        }).finally(() => {\r\n          gopay = false;\r\n        });\r\n      } else {\r\n        this.native.wechatpayment(res.result).then(res => {\r\n          this.getHttpayend(order_id, order_sn);\r\n        }).catch(err => {\r\n          this.native.presentToast('支付失败!');\r\n        }).finally(() => {\r\n          gopay = false;\r\n        });\r\n      }\r\n      \r\n      // this.gotosucess();\r\n    }, error2 => {\r\n    });\r\n  }\r\n  getHttpayend(order_id, order_sn) {\r\n    this.gotosucess();\r\n    this.http.postformdataloading(this.http.acteditpayment2, {order_id}).subscribe(res => {\r\n    }, err => {\r\n    });\r\n  }\r\n  gotosucess(res?:object) {\r\n    let obj = res;\r\n    if (!obj) {\r\n      obj = {\r\n        order: {\r\n          order_id: this.ordersn\r\n        }\r\n      };\r\n    }\r\n    this.orderdatafn.setData(obj);\r\n    this.route.navigate(['/ordersuccess'], {queryParams: {type: 2}});\r\n  }\r\n  async syyepay() {\r\n    const popover = await this.popoverController.create({\r\n      component: PayboxComponent,\r\n      translucent: false,\r\n      cssClass: 'payboxcontent',\r\n      componentProps: {\r\n        // src: this.http.domain + this.productData.goods_thumb,\r\n        price: this.syye,\r\n      }\r\n    });\r\n    await popover.present();\r\n    const pwd = await popover.onDidDismiss().then(res => {\r\n      console.log(res);\r\n      if (!res.data) {\r\n        return false;\r\n      }\r\n      return res.data;\r\n    })\r\n\r\n    return pwd;\r\n  }\r\n  async checksurplus(pwd) {\r\n    return new Promise((resolve, reject) => {\r\n      this.http.postformdataloading(this.http.editsurplus, {order_id: this.orderId, surplus: this.syye, password: pwd}).subscribe(res => {\r\n        console.log('余额支付成功')\r\n        console.log(res)\r\n        resolve(true);\r\n      }, error2 => {\r\n        reject(false);\r\n      });\r\n    });\r\n  }\r\n\r\n  setyechange() {\r\n    if (this.syye < 0) {\r\n      this.native.presentAlert('请输入正确的金额');\r\n      this.syye = 0;\r\n      return false;\r\n    }\r\n    if (this.syye && this.syye.toString().includes('.')) {\r\n      const str = this.syye.toString().split('.');\r\n      if (str[1].length > 2) {\r\n        this.native.presentAlert('最小支持金额为分');\r\n        this.syye = 0;\r\n        console.log(this.syye);\r\n        return false;\r\n      }\r\n    }\r\n    if (this.syye > this.yoursurplus || this.syye > this.price) {\r\n      this.native.presentAlert('请输入正确的金额');\r\n      this.syye = 0;\r\n      return false;\r\n    }\r\n  }\r\n  goBack(): void {\r\n    this.presentAlertConfirm()\r\n  }\r\n  // async presentAlert() {\r\n  //   const alert = await this.alertController.create({\r\n  //     header: '提示',\r\n  //     message: '余额支付已成功，30分钟内未继续支付将原路返还.',\r\n  //     buttons: [ {\r\n  //       text: '确定',\r\n  //       handler: () => {\r\n  //         console.log('Confirm Okay');\r\n  //         this.backfn();\r\n  //       }\r\n  //     }]\r\n  //   });\r\n  //\r\n  //   await alert.present();\r\n  // }\r\n  async presentAlertConfirm() {\r\n    const alert = await this.alertController.create({\r\n      header: '是否取消支付!',\r\n      message: '请在30分钟内到行程中继续支付，否则将取消订单!',\r\n      buttons: [\r\n        {\r\n          text: '取消',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: (blah) => {\r\n            console.log('Confirm Cancel: blah');\r\n            // this.backfn();\r\n          }\r\n        }, {\r\n          text: '确定',\r\n          handler: () => {\r\n            console.log('Confirm Okay');\r\n            this.backfn();\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n  backfn() {\r\n    this.nav.back();\r\n  }\r\n}\r\n"],"sourceRoot":""}