{"version":3,"sources":["webpack:///./src/app/pages/news/news.module.ts","webpack:///./src/app/pages/news/news.page.html","webpack:///./src/app/pages/news/news.page.scss","webpack:///./src/app/pages/news/news.page.ts"],"names":[],"mappings":"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","file":"pages-news-news-module.js","sourcesContent":["import { ComponentsModule } from 'src/app/components/components.module';\n/*\n * @Author: wjy-mac\n * @Date: 2019-10-09 21:49:28\n * @LastEditors: wjy-mac\n * @LastEditTime: 2019-11-07 22:20:08\n * @Description: file content\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NewsPage } from './news.page';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    ComponentsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [NewsPage]\n})\nexport class NewsPageModule {}\n","module.exports = \"<!--\\n * @Author: wjy-mac\\n * @Date: 2019-10-10 09:55:35\\n * @LastEditors: wjy-mac\\n * @LastEditTime: 2019-11-15 17:55:13\\n * @Description: file content\\n -->\\n<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"goBack()\\\">\\n        <ion-icon name=\\\"arrow-back\\\" mode=\\\"ios\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>{{type === 1 ? '消息' : '通知' }}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <ion-refresher slot=\\\"fixed\\\" pullFactor=\\\"0.5\\\" pullMin=\\\"100\\\" pullMax=\\\"200\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content\\n        pullingIcon=\\\"arrow-dropdown\\\"\\n        pullingText=\\\"Pull to refresh\\\"\\n        refreshingSpinner=\\\"circles\\\"\\n        refreshingText=\\\"更新中...\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n  <div class=\\\"type-box ion-margin-bottom\\\">\\n    <div [ngClass]=\\\"{active: type === 1}\\\" (click)=\\\"type = 1\\\">消息<ion-badge color=\\\"danger\\\" *ngIf=\\\"newslist.allnum > 0\\\">{{newslist.allnum}}</ion-badge></div>\\n    <div [ngClass]=\\\"{active: type === 2}\\\" (click)=\\\"type = 2\\\">通知<ion-badge color=\\\"danger\\\" *ngIf=\\\"newslist.tzallnum > 0\\\">{{newslist.tzallnum}}</ion-badge></div>\\n  </div>\\n  <div [hidden]=\\\"type !== 1\\\">\\n    <app-nomore *ngIf=\\\"list.length === 0\\\"></app-nomore>\\n    <ion-list>\\n      <ion-item-sliding *ngFor=\\\"let item of list\\\">\\n          <ion-item (click)=\\\"goNews(item)\\\">\\n            <ion-avatar slot=\\\"start\\\">\\n              <img class=\\\"header\\\" [src]=\\\"item['arr'][0].theader | imgsrc: http.zdomain\\\" alt=\\\"\\\">\\n            </ion-avatar>\\n            <ion-label>\\n              {{item['arr'][0].shopName || item['arr'][item['arr'].length - 1].tname}}\\n              <p *ngIf=\\\"item['arr'][item['arr'].length - 1].type == 1\\\">{{item['arr'][item['arr'].length - 1].content}}</p>\\n              <p *ngIf=\\\"item['arr'][item['arr'].length - 1].type == 2\\\">[图片]</p>\\n              <p *ngIf=\\\"item['arr'][item['arr'].length - 1].type == 3\\\">[商品]</p>\\n            </ion-label>\\n            <ion-note slot=\\\"end\\\">\\n              <div class=\\\"time\\\">{{item['arr'][item['arr'].length - 1].time  | newslisttime: item['arr']}}</div>\\n              <ion-badge color=\\\"danger\\\" *ngIf=\\\"item.num && item.num > 0\\\">{{item['num']}}</ion-badge>\\n            </ion-note>\\n          </ion-item>\\n          <ion-item-options side=\\\"end\\\">\\n            <ion-item-option (click)=\\\"unread(item['arr'][item['arr'].length - 1].shopId)\\\">标为已读</ion-item-option>\\n            <ion-item-option color=\\\"danger\\\" (click)=\\\"deleteItem(item['arr'][item['arr'].length - 1].shopId)\\\">删除</ion-item-option>\\n          </ion-item-options>\\n        </ion-item-sliding>\\n    </ion-list>\\n  </div>\\n  <div [hidden]=\\\"type !== 2\\\" class=\\\"tzgg\\\">\\n    <app-nomore *ngIf=\\\"tzgglist.length === 0\\\"></app-nomore>\\n    <div class=\\\"my-list\\\">\\n      <div class=\\\"my-item ion-margin-bottom\\\" *ngFor=\\\"let item of tzgglist\\\" (click)=\\\"goTzcontent(item)\\\">\\n        <div class=\\\"title\\\"><span><ion-text color=\\\"danger\\\" *ngIf=\\\"item.isread === '0'\\\">*</ion-text>平台通知</span> <ion-text color=\\\"tertiary\\\">{{item.last_send | time}}</ion-text></div>\\n        <div class=\\\"tz-content\\\">\\n          <img src=\\\"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y\\\" alt=\\\"\\\">\\n          <div class=\\\"right\\\">\\n            <div class=\\\"name\\\">{{item.title || item.email_content}}</div>\\n            <!-- <div class=\\\"ts\\\" [innerHTML]=\\\"assembleHTML(item.email_content)\\\"></div> -->\\n            <ion-text color=\\\"tertiary\\\">来自平台</ion-text>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n      <ion-infinite-scroll-content\\n        loadingSpinner=\\\"bubbles\\\"\\n        loadingText=\\\"Loading more data...\\\">\\n      </ion-infinite-scroll-content>\\n    </ion-infinite-scroll>\\n</ion-content>\\n\"","module.exports = \".type-box {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: center; }\\n  .type-box > div {\\n    font-size: var(--ion-text);\\n    color: #333;\\n    margin-right: 50px;\\n    position: relative; }\\n  .type-box > div.active {\\n      font-size: var(--ion-title);\\n      color: var(--ion-color-dark);\\n      font-weight: 600; }\\n  .type-box > div.active::after {\\n        content: '';\\n        display: block;\\n        background: var(--ion-color-linegradient);\\n        height: 3px;\\n        width: 60%;\\n        border-radius: 1.5px;\\n        margin-left: 20%; }\\n  .type-box > div ion-badge {\\n      position: absolute;\\n      left: 110%; }\\n  .time {\\n  text-align: center;\\n  font-size: var(--ion-sm-text);\\n  margin-bottom: 6px; }\\n  .my-item {\\n  background-color: var(--ion-color-light);\\n  border-radius: 5px;\\n  padding: 8px;\\n  width: 100%; }\\n  .my-item ion-text {\\n    font-size: var(--ion-sm-text); }\\n  .my-item .title {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: space-between;\\n    align-items: center;\\n    margin-bottom: 7px; }\\n  .my-item .title span {\\n      font-size: var(--ion-title);\\n      color: var(--ion-color-dark); }\\n  .my-item .tz-content {\\n    display: flex;\\n    flex-direction: row;\\n    align-items: stretch; }\\n  .my-item .tz-content img {\\n      width: 70px;\\n      height: 70px; }\\n  .my-item .tz-content .right {\\n      flex: 1;\\n      background-color: #fff;\\n      overflow: hidden; }\\n  .my-item .tz-content .right .name {\\n        font-size: var(--ion-text);\\n        color: var(--ion-color-dark);\\n        height: 40px;\\n        line-height: 20px;\\n        overflow: hidden;\\n        margin: 10px 10px 0;\\n        width: calc(100% - 20px); }\\n  .my-item .tz-content .right .ts {\\n        font-size: var(--ion-sm-text);\\n        color: var(--ion-color-medium);\\n        margin: 0 10px 10px;\\n        height: 20px;\\n        line-height: 20px;\\n        overflow: hidden;\\n        white-space: nowrap;\\n        text-overflow: ellipsis;\\n        width: calc(100% - 20px); }\\n  .my-item .tz-content .right .ts p {\\n          margin: 0 !important; }\\n  .my-item .tz-content .right ion-text {\\n        margin-left: 10px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93ankvRGVza3RvcC9seGovc3JjL2FwcC9wYWdlcy9uZXdzL25ld3MucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQiwyQkFBMkI7RUFDM0IsbUJBQW1CLEVBQUE7RUFKckI7SUFNSSwwQkFBMEI7SUFDMUIsV0FBVztJQUNYLGtCQUFrQjtJQUNsQixrQkFBa0IsRUFBQTtFQVR0QjtNQVdNLDJCQUEyQjtNQUMzQiw0QkFBNEI7TUFDNUIsZ0JBQWdCLEVBQUE7RUFidEI7UUFlUSxXQUFXO1FBQ1gsY0FBYztRQUNkLHlDQUF5QztRQUN6QyxXQUFXO1FBQ1gsVUFBVTtRQUNWLG9CQUFvQjtRQUNwQixnQkFBZ0IsRUFBQTtFQXJCeEI7TUF5Qk0sa0JBQWtCO01BQ2xCLFVBQVUsRUFBQTtFQUloQjtFQUNFLGtCQUFrQjtFQUNsQiw2QkFBNkI7RUFDN0Isa0JBQWtCLEVBQUE7RUFFcEI7RUFDRSx3Q0FBd0M7RUFDeEMsa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixXQUFXLEVBQUE7RUFKYjtJQU1JLDZCQUE2QixFQUFBO0VBTmpDO0lBU0ksYUFBYTtJQUNiLG1CQUFtQjtJQUNuQiw4QkFBOEI7SUFDOUIsbUJBQW1CO0lBQ25CLGtCQUFrQixFQUFBO0VBYnRCO01BZU0sMkJBQTJCO01BQzNCLDRCQUE0QixFQUFBO0VBaEJsQztJQW9CSSxhQUFhO0lBQ2IsbUJBQW1CO0lBQ25CLG9CQUFvQixFQUFBO0VBdEJ4QjtNQXdCTSxXQUFXO01BQ1gsWUFBWSxFQUFBO0VBekJsQjtNQTRCTSxPQUFPO01BQ1Asc0JBQXNCO01BQ3RCLGdCQUFnQixFQUFBO0VBOUJ0QjtRQWdDUSwwQkFBMEI7UUFDMUIsNEJBQTRCO1FBQzVCLFlBQVk7UUFDWixpQkFBaUI7UUFDakIsZ0JBQWdCO1FBQ2hCLG1CQUFtQjtRQUNuQix3QkFBd0IsRUFBQTtFQXRDaEM7UUF5Q1EsNkJBQTZCO1FBQzdCLDhCQUE4QjtRQUM5QixtQkFBbUI7UUFDbkIsWUFBWTtRQUNaLGlCQUFpQjtRQUNqQixnQkFBZ0I7UUFDaEIsbUJBQW1CO1FBQ25CLHVCQUF1QjtRQUN2Qix3QkFBd0IsRUFBQTtFQWpEaEM7VUFtRFUsb0JBQW9CLEVBQUE7RUFuRDlCO1FBdURRLGlCQUFpQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvbmV3cy9uZXdzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50eXBlLWJveCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgJj5kaXYge1xuICAgIGZvbnQtc2l6ZTogdmFyKC0taW9uLXRleHQpO1xuICAgIGNvbG9yOiAjMzMzO1xuICAgIG1hcmdpbi1yaWdodDogNTBweDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgJi5hY3RpdmUge1xuICAgICAgZm9udC1zaXplOiB2YXIoLS1pb24tdGl0bGUpO1xuICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYXJrKTtcbiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAmOjphZnRlciB7XG4gICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLWxpbmVncmFkaWVudCk7XG4gICAgICAgIGhlaWdodDogM3B4O1xuICAgICAgICB3aWR0aDogNjAlO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxLjVweDtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDIwJTtcbiAgICAgIH1cbiAgICB9XG4gICAgaW9uLWJhZGdlIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGxlZnQ6IDExMCU7XG4gICAgfVxuICB9XG59XG4udGltZSB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiB2YXIoLS1pb24tc20tdGV4dCk7XG4gIG1hcmdpbi1ib3R0b206IDZweDtcbn1cbi5teS1pdGVtIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLWxpZ2h0KTtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBwYWRkaW5nOiA4cHg7XG4gIHdpZHRoOiAxMDAlO1xuICBpb24tdGV4dCB7XG4gICAgZm9udC1zaXplOiB2YXIoLS1pb24tc20tdGV4dCk7XG4gIH1cbiAgLnRpdGxlIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgbWFyZ2luLWJvdHRvbTogN3B4O1xuICAgIHNwYW4ge1xuICAgICAgZm9udC1zaXplOiB2YXIoLS1pb24tdGl0bGUpO1xuICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYXJrKTtcbiAgICB9XG4gIH1cbiAgLnR6LWNvbnRlbnQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICBhbGlnbi1pdGVtczogc3RyZXRjaDtcbiAgICBpbWcge1xuICAgICAgd2lkdGg6IDcwcHg7XG4gICAgICBoZWlnaHQ6IDcwcHg7XG4gICAgfVxuICAgIC5yaWdodCB7XG4gICAgICBmbGV4OiAxO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAubmFtZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogdmFyKC0taW9uLXRleHQpO1xuICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhcmspO1xuICAgICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBtYXJnaW46IDEwcHggMTBweCAwO1xuICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gMjBweCk7XG4gICAgICB9XG4gICAgICAudHMge1xuICAgICAgICBmb250LXNpemU6IHZhcigtLWlvbi1zbS10ZXh0KTtcbiAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xuICAgICAgICBtYXJnaW46IDAgMTBweCAxMHB4O1xuICAgICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDIwcHgpO1xuICAgICAgICBwIHtcbiAgICAgICAgICBtYXJnaW46IDAgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaW9uLXRleHQge1xuICAgICAgICBtYXJnaW4tbGVmdDogMTBweDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ== */\"","import { reject } from 'q';\n/*\n * @Author: wjy-mac\n * @Date: 2019-10-10 09:55:35\n * @LastEditors: wjy-mac\n * @LastEditTime: 2019-11-16 00:15:39\n * @Description: file content\n */\nimport { Component, OnInit } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { NewsData, TzData } from 'src/app/interface/news-data';\nimport { HttpService } from './../../services/http.service';\nimport { NewsListService } from './../../services/news-list.service';\nimport { TopageService } from './../../services/topage.service';\nimport { DomSanitizer } from '@angular/platform-browser';\n@Component({\n  selector: 'app-news',\n  templateUrl: './news.page.html',\n  styleUrls: ['./news.page.scss'],\n})\nexport class NewsPage implements OnInit { \n  type: number; // 1 消息 2 平台通知\n  list: {id: string, arr: NewsData[]}[];\n  tzgglist: TzData[];\n  constructor(private nav: NavController, private route: Router, public newslist: NewsListService, private http: HttpService,\n    private topage: TopageService, public sanitizer: DomSanitizer) { }\n\n  ngOnInit() {\n    this.type = 1;\n    this.list = this.newslist.getList();\n    this.tzgglist = this.newslist.getTzlist();\n    console.log(this.list);\n  }\n  ionViewWillEnter() {\n    if (this.tzgglist.length === 0) {\n      this.getTznews().then(res => {\n        if (res < this.newslist.tzggPageobj.limit) {\n          this.newslist.setTznewsAll();\n        }\n      }).catch(err => {});\n    }\n    if (this.list.length === 0) {\n      this.getNewslist().then(res => {\n        if (res < this.newslist.newsPageobj.limit) {\n          this.newslist.setNewsall();\n        }\n      }).catch(err => {});\n    }\n  }\n  assembleHTML(strHTML: any) {\n    return this.sanitizer.bypassSecurityTrustHtml(strHTML);\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 获取聊天消息列表\n   * @Date: 2019-11-14 23:44:54\n   * @param {type} \n   * @return: \n   */  \n  getNewslist() {\n    return new Promise((resolve, reject) => {\n      const obj = this.newslist.getNewspage();\n      this.http.getData(this.http.getMynewslist, obj).subscribe(res => {\n        if (obj.page === 0) {\n          this.newslist.setNewsnum(Number(res.num));\n        }\n        this.newslist.setNewslist(res.data);\n        resolve(res.data.length);\n      }, err => {\n        reject();\n      });\n    });\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 获取通知列表\n   * @Date: 2019-11-14 21:02:04\n   * @param {type} \n   * @return: \n   */  \n  getTznews() {\n    return new Promise((resolve, reject) => {\n      const obj = this.newslist.getTzpager();\n      this.http.getData(this.http.getMynews, obj).subscribe(res => {\n        this.newslist.setTzlist(res.data);\n        if (obj.page === 0) {\n          this.newslist.setTznum(res.num);\n        }\n        resolve(res.data.length);\n      }, err => {\n        reject();\n      });\n    });\n  }\n  goBack() {\n    this.nav.back();\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 下拉刷新\n   * @Date: 2019-11-14 23:10:44\n   * @param {type} \n   * @return: \n   */  \n  doRefresh(event) {\n    this.newslist.czPage(this.type);\n    if (this.type === 1) {\n      this.getNewslist().then(res => {\n        if (res < this.newslist.newsPageobj.limit) {\n          this.newslist.setNewsall();\n        }\n        event.target.complete();\n      }).catch(err => {\n        event.target.complete();\n      });\n    } else {\n      this.getTznews().then(res => {\n        if (res < this.newslist.tzggPageobj.limit) {\n          this.newslist.setTznewsAll();\n        }\n        event.target.complete();\n      }).catch(err => {\n        event.target.complete();\n      });\n    }\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 翻页\n   * @Date: 2019-11-14 21:05:54\n   * @param {type} \n   * @return: \n   */  \n  loadData(event) {\n    if (this.type === 1) {\n      if (this.newslist.newsPageobj.all) {\n        event.target.complete();\n      } else {\n        this.newslist.setNewspager(1);\n        this.getNewslist().then(res => {\n          if (res < this.newslist.newsPageobj.limit) {\n            this.newslist.setNewsall();\n          }\n          event.target.complete();\n        }).catch(() => {\n          this.newslist.setNewspager(-1);\n          event.target.complete();\n        });\n      }\n    } else {\n      if (this.newslist.tzggPageobj.all) {\n        event.target.complete();\n      } else {\n        this.newslist.setTzpager(1);\n        this.getTznews().then(res => {\n          if (res < this.newslist.tzggPageobj.limit) {\n            this.newslist.setTznewsAll();\n          }\n          event.target.complete();\n        }).catch(() => {\n          this.newslist.setTzpager(-1);\n          event.target.complete();\n        });\n      }\n    }\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 跳转消息详情\n   * @Date: 2019-11-07 15:07:40\n   * @param {type} item 店铺对象\n   * @return: \n   */\n  goNews(item: {id: string, arr: NewsData[]}) {\n    const id = item['id']; //聊天对象id 如店铺/好友id // 客户不会出现在此\n    const data: NewsData = item['arr'][item['arr'].length - 1];\n    const name = data.shopName || data.uname;\n    this.topage.toPage(17, id, name);\n    // this.route.navigate(['/newslist'], {queryParams: {id, name}});\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 去通知详情\n   * @Date: 2019-11-14 20:57:25\n   * @param {type} \n   * @return: \n   */  \n  goTzcontent(item: TzData) {\n    if (item.isread === '0') {\n      this.setisread(item.id);\n    }\n    this.topage.toPage(18, item.id);\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 设置聊天已读\n   * @Date: 2019-11-14 20:03:17\n   * @param {type} \n   * @return: \n   */  \n  unread(id: string) {\n    this.http.getData(this.http.setMynewsList, {shopId: id}).subscribe(res => {\n      this.newslist.clearShopid(id);\n    }, err => {});\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 设置通知消息已读\n   * @Date: 2019-11-14 21:12:23\n   * @param {type} \n   * @return: \n   */  \n  setisread(id) {\n    this.http.getData(this.http.setMynews, {id}).subscribe(res => {\n      this.newslist.setTzyd(id);\n    }, err2 => {});\n  }\n  /**\n   * @Author: wjy-mac\n   * @description: 删除目标聊天消息\n   * @Date: 2019-11-14 20:01:02\n   * @param {type} \n   * @return: \n   */  \n  deleteItem(id: string) {\n    this.http.getData(this.http.DeleteMynewslist, {shopId: id}).subscribe(res => {\n      this.newslist.deleteItem(id);\n    }, err2 => {});\n  }\n}\n"],"sourceRoot":""}