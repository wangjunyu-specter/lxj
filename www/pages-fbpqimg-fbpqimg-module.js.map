{"version":3,"sources":["webpack:///./src/app/pages/fbpqimg/fbpqimg.module.ts","webpack:///./src/app/pages/fbpqimg/fbpqimg.page.html","webpack:///./src/app/pages/fbpqimg/fbpqimg.page.scss","webpack:///./src/app/pages/fbpqimg/fbpqimg.page.ts"],"names":[],"mappings":"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","file":"pages-fbpqimg-fbpqimg-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FbpqimgPage } from './fbpqimg.page';\nimport {ComponentsModule} from '../../components/components.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FbpqimgPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [FbpqimgPage]\n})\nexport class FbpqimgPageModule {}\n","module.exports = \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-buttons slot=\\\"start\\\" mode=\\\"ios\\\">\\n      <!--<ion-back-button></ion-back-button>-->\\n      <ion-button (click)=\\\"goBack()\\\">\\n        <ion-icon mode=\\\"ios\\\" name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>发布</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <!--<ion-back-button></ion-back-button>-->\\n      <ion-button (click)=\\\"sub()\\\" [disabled]=\\\"!content && imgs.length === 0\\\">\\n        <ion-icon name=\\\"paper-plane\\\"></ion-icon>发表\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <ion-textarea rows=\\\"7\\\" [maxlength]=\\\"300\\\" [(ngModel)]=\\\"content\\\" placeholder=\\\"此刻你在哪里,分享下你的旅行心情吧~\\\"></ion-textarea>\\n  <app-pqimgbox *ngIf=\\\"type != '2'\\\" [imglist]=\\\"imgs\\\" [showend]=\\\"isshowend\\\" (clickItem)=\\\"remove($event)\\\" (addimgitem)=\\\"addfm()\\\"></app-pqimgbox>\\n  <!--<img [src]=\\\"videoslt\\\" alt=\\\"\\\">-->\\n  <!--<video width=\\\"320\\\" height=\\\"240\\\" controls>-->\\n    <!--<source [src]=\\\"videofile\\\" type=\\\"video/mp4\\\">-->\\n    <!--<source [src]=\\\"videofile\\\" type=\\\"video/ogg\\\">-->\\n    <!--您的浏览器不支持 video 标签。-->\\n  <!--</video>-->\\n  <!--<video width=\\\"320\\\" height=\\\"240\\\" controls>-->\\n    <!--<source [src]=\\\"videofile1\\\" type=\\\"video/mp4\\\">-->\\n    <!--<source [src]=\\\"videofile1\\\" type=\\\"video/ogg\\\">-->\\n    <!--您的浏览器不支持 video 标签。-->\\n  <!--</video>-->\\n  <div class=\\\"bf-box\\\" *ngIf=\\\"type == '2'\\\" (click)=\\\"playvideo()\\\">\\n    <img src=\\\"../../../assets/icon/play.svg\\\" alt=\\\"\\\">\\n  </div>\\n  <ion-list margin-top>\\n    <ion-item button>\\n      <ion-icon name=\\\"pin\\\" slot=\\\"start\\\"></ion-icon>{{addressObj.address}}\\n    </ion-item>\\n  </ion-list>\\n</ion-content>\\n\"","module.exports = \".img-box {\\n  display: grid;\\n  grid-template-columns: repeat(3, 1fr);\\n  gap: 10px; }\\n\\n.box {\\n  display: inline-block;\\n  position: relative;\\n  width: 100%;\\n  float: left;\\n  font-size: 12px;\\n  background-color: var(--ion-gray-background-color);\\n  border-radius: 5px;\\n  overflow: hidden; }\\n\\n.box img {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%; }\\n\\n.box:before {\\n  /* Other ratios */\\n  content: \\\"\\\";\\n  display: block;\\n  padding-top: 100%; }\\n\\n.bf-box {\\n  width: 100px;\\n  height: 100px;\\n  border: 1px solid var(--ion-color-light);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center; }\\n\\n.bf-box img {\\n    width: 40%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93ankvRGVza3RvcC9seGovc3JjL2FwcC9wYWdlcy9mYnBxaW1nL2ZicHFpbWcucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtFQUNiLHFDQUFxQztFQUNyQyxTQUFTLEVBQUE7O0FBRVg7RUFDRSxxQkFBcUI7RUFDckIsa0JBQWtCO0VBQ2xCLFdBQVc7RUFFWCxXQUFXO0VBQ1gsZUFBZTtFQUNmLGtEQUFrRDtFQUdsRCxrQkFBa0I7RUFDbEIsZ0JBQWdCLEVBQUE7O0FBWGxCO0lBYUksa0JBQWtCO0lBQ2xCLE1BQU07SUFDTixPQUFPO0lBQ1AsV0FBVztJQUNYLFlBQVksRUFBQTs7QUFHaEI7RUFDRSxpQkFBQTtFQUVBLFdBQVc7RUFDWCxjQUFjO0VBQ2QsaUJBQWlCLEVBQUE7O0FBRW5CO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYix3Q0FBd0M7RUFDeEMsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix1QkFBdUIsRUFBQTs7QUFOekI7SUFRSSxVQUFVLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9mYnBxaW1nL2ZicHFpbWcucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmltZy1ib3gge1xuICBkaXNwbGF5OiBncmlkO1xuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpO1xuICBnYXA6IDEwcHg7XG59XG4uYm94IHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHdpZHRoOiAxMDAlO1xuICAvL21hcmdpbjogNSUgNSUgMCAwO1xuICBmbG9hdDogbGVmdDtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pb24tZ3JheS1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHg7XG4gIC1tb3otYm9yZGVyLXJhZGl1czogNXB4O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGltZyB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgfVxufVxuLmJveDpiZWZvcmUge1xuICAvKiBPdGhlciByYXRpb3MgKi9cblxuICBjb250ZW50OiBcIlwiO1xuICBkaXNwbGF5OiBibG9jaztcbiAgcGFkZGluZy10b3A6IDEwMCU7XG59XG4uYmYtYm94IHtcbiAgd2lkdGg6IDEwMHB4O1xuICBoZWlnaHQ6IDEwMHB4O1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1pb24tY29sb3ItbGlnaHQpO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgaW1nIHtcbiAgICB3aWR0aDogNDAlO1xuICB9XG59XG4iXX0= */\"","/*\n * @Author: wjy\n * @Date: 2019-08-03 14:52:31\n * @LastEditors: wjy\n * @LastEditTime: 2019-08-04 02:07:00\n * @Description: file content\n */\nimport { Component, OnInit } from '@angular/core';\nimport {NavController, ActionSheetController, PopoverController} from '@ionic/angular';\nimport { HttpService } from '../../services/http.service';\nimport {UserService} from '../../services/user.service';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport { SeleteMediaService } from '../../services/selete-media.service';\n// import { VideoPlayer } from '@ionic-native/video-player/ngx';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\n// import { MediaFile } from '@ionic-native/media-capture/ngx';\nimport { File, FileReader } from '@ionic-native/file/ngx';\nimport { NativeService } from '../../services/native.service';\n// import { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport {error} from 'selenium-webdriver';\nimport {MediaFile} from '@ionic-native/media-capture/ngx';\nimport {UploadComponent} from '../../components/upload/upload.component';\n@Component({\n  selector: 'app-fbpqimg',\n  templateUrl: './fbpqimg.page.html',\n  styleUrls: ['./fbpqimg.page.scss'],\n})\nexport class FbpqimgPage implements OnInit {\n  imgs: string[];\n  addressObj: any;\n  address: string;\n  lnglat: string;\n  content: string;\n  type: string;\n  // addimg: string;\n  isshowend: boolean;\n  // video: any; // 视频绝对路径\n  // responseImgs: string[];\n  userdata: any;\n  isloading: boolean;\n  videoslt: string; // 视频缩略图\n  videofile: MediaFile; // 视频文件\n  videofile1: any; // 视频文件\n  constructor(private nav: NavController, private http: HttpService,\n              private user: UserService,\n              private seletemedia: SeleteMediaService,\n              private native: NativeService, public actionSheetController: ActionSheetController,\n              private file: File,\n              private activeroute: ActivatedRoute,\n              private transfer: FileTransfer, public popoverController: PopoverController,\n              private route: Router) { }\n\n  ngOnInit() {\n    // this.addimg = 'www/assets/add.png';\n    this.imgs = this.seletemedia.getList();\n    this.isshowend = true;\n    this.address = '12323';\n    const params = this.activeroute.snapshot.queryParams;\n    this.type = (params['type']).toString();\n\n  }\n  ionViewDidEnter() {\n    this.addressObj = this.user.getLocation();\n    if (this.type == '2') {\n      // this.video = this.imgs[0];\n      this.videofile = this.seletemedia.getData();\n      this.videofile.getFormatData(data => {\n        this.videofile1 = data;\n      });\n      // this.setSlt();\n    }\n    this.userdata = this.user.getUserp();\n  }\n  // setSlt() {\n  //   const videodata = this.seletemedia.getData()[0];\n  //   this.videofile.getFormatData(data => {\n  //     console.log(data);\n  //   });\n  //\n  // }\n  goBack(): void {\n    this.nav.back();\n  }\n  ionViewDidLeave() {\n    this.seletemedia.clear();\n  }\n  addfm() {\n    if (this.imgs.length === 9) {\n      return false;\n    }\n    this.presentActionSheet();\n  }\n  remove(index: number) {\n    // this.imgs.splice(index, 1);\n    this.seletemedia.removeOne(index);\n    if (this.imgs.length === 8) {\n      this.isshowend = true;\n    }\n  }\n  async presentActionSheet() {\n    const actionSheet = await this.actionSheetController.create({\n      header: '请选择来源',\n      buttons: [{\n        text: '相机',\n        role: 'destructive',\n        handler: () => {\n          console.log('Delete clicked');\n          // this.native.captureImage().then(res => {\n          //   this.addimgfn(res['fullPath']);\n          // });\n          this.native.getPictureByCamera().then(res => {\n            this.addimgfn(res);\n          });\n        }\n      }, {\n        text: '相册',\n        handler: () => {\n          console.log('Share clicked');\n          this.native.getPictures( 9 - this.imgs.length).then((res: any) => {\n            res.map(img => {\n              this.addimgfn(img);\n            });\n          }, err => {\n\n          });\n        }\n      }, {\n        text: '取消',\n        role: 'cancel',\n        handler: () => {\n          console.log('Cancel clicked');\n        }\n      }]\n    });\n    await actionSheet.present();\n  }\n  addimgfn(res) {\n    this.seletemedia.addImg(res);\n    if (this.imgs.length === 9) {\n      this.isshowend = false;\n    }\n  }\n  contentsend(patharr?: string[]) {\n    const obj = {\n      img: JSON.stringify(patharr),\n      type: 1,\n      address: this.addressObj.address,\n      lnglat: this.addressObj.lng + '|' + this.addressObj.lat,\n      content: this.content\n    };\n    this.http.postformdataloading(this.http.fbpqitem, obj).subscribe(res => {\n      console.log(res);\n      // this.isloading = false;\n      this.user.addjf(res.result.num);\n      this.uploadEnd();\n      this.route.navigate(['/fbyjmore'], {queryParams: {type: 1, num: res.result.num}});\n\n    }, err2 => {\n      this.uploadEnd();\n    });\n  }\n  sub() {\n    this.isloading = true;\n    this.subloading();\n    if (this.imgs.length === 0) {\n      this.contentsend();\n      return false;\n    }\n    if (this.type === '2') {\n      this.getVidefile();\n\n    } else {\n      this.basezfile();\n    }\n  }\n  getVidefile() {\n    // const oMyForm = new FormData();    // 创建一个空的FormData对象\n    // oMyForm.append('file', this.videofile, this.videofile.name);\n    // // oMyForm.append('abc', '123');\n    // this.imgupload(oMyForm).then(filepath => {\n    //   this.contentsend([filepath as string]);\n    // });\n    const fileTransfer: FileTransferObject = this.transfer.create();\n    const width = this.videofile1.width * 0.5;\n    const height = this.videofile1.height * 0.5;\n    const obj: FileUploadOptions = {\n      fileName: this.videofile.name,\n      fileKey: 'file',\n      chunkedMode: false,\n      mimeType: this.videofile.type,\n      params: {\n        width,\n        height\n      }\n    }\n    fileTransfer.upload(this.videofile.fullPath, this.http.domain + this.http.updateimg, obj).then(res => {\n      const path = JSON.parse(res.response)['result'];\n      this.contentsend([path]);\n    }).catch(err2 => {\n      console.log('错了我')\n      console.error(err2);\n      this.uploadEnd();\n    });\n  }\n  basezfile() {\n    const proarr = [];\n    this.imgs.map((base64, index) => {\n      const file = this.native.getImgbase64tofile(base64, 'pq' + index)\n      proarr.push(this.imgupload(file));\n    });\n    Promise.all(proarr).then(res => {\n      this.contentsend(res);\n    }).catch(err => {\n      this.native.presentAlert('上传失败，请查看网络是否正常');\n      this.uploadEnd();\n    });\n  }\n  imgupload(file) {\n    return new Promise((resolve, reject) => {\n      const oReq = new XMLHttpRequest();\n      oReq.open('POST', this.http.domain + this.http.updateimg);\n      oReq.onreadystatechange = (oEvent) => {\n        if (oReq.readyState == 4 && oReq.status == 200) {\n          const res = JSON.parse(oReq.response)\n          resolve(res.result);\n        }\n      }\n      oReq.onerror = (err) => {\n        reject(err);\n      }\n      oReq.send(file);\n    });\n  }\n  playvideo() {\n    // : todo 此处未实现ios和浏览器播放\n   this.native.nativeVideoplay(this.videofile.fullPath);\n\n  }\n  uploadEnd() {\n    this.isloading = false;\n    this.popoverController.dismiss();\n  }\n  async subloading() {\n    const popover = await this.popoverController.create({\n      component: UploadComponent,\n      translucent: false,\n      cssClass: 'payboxcontent',\n      backdropDismiss: false\n    });\n\n    await popover.present();\n  }\n}\n\nfunction getFilepath(oldpath: string) {\n  if (!oldpath) {\n    return {};\n  }\n  const index = oldpath.lastIndexOf('/');\n  const path = oldpath.substr(0, index);\n  const name = oldpath.substr(index + 1);\n  return {\n    path,\n    name\n  };\n}\n"],"sourceRoot":""}