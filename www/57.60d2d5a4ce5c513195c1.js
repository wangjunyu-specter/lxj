(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{iTUp:function(n,l,e){"use strict";e.d(l,"a",(function(){return t}));var t=function(){return function(){}}()},laDz:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),u=e("mrSG"),i=e("ZZ/e"),o=e("qfBg"),a=e("6m4Z"),r=e("N+K7"),d=function(){function n(n,l,e,t,u){this.nav=n,this.userfn=l,this.native=e,this.actionSheetController=t,this.http=u}return n.prototype.ngOnInit=function(){var n=this;this.headimg="../../../assets/load.jpg",this.userfn.getUserp().then((function(l){console.log(l),n.userid=l.user_id,n.userData={headimg:l.headimg,username:l.user_name||l.username,birthday:l.birthday,sex:l.sex}})).catch((function(n){}));var l=(new Date).getFullYear().toString();this.maxyear=l},n.prototype.goBack=function(){this.nav.back()},n.prototype.changeData=function(){this.isupdate=!1,console.log(this.userData.username.length),this.userData.username.length>20&&(this.userData.username=this.userData.username.substr(0,20),this.native.presentAlert("标题请不要超过20个字哦~"))},n.prototype.onSubmit=function(){return u.__awaiter(this,void 0,void 0,(function(){var n;return u.__generator(this,(function(l){return console.log(this.userData),(n=Object.assign({},this.userData)).username?(this.isloading=!0,n.birthday.includes("T")&&(n.birthday=n.birthday.split("T")[0],this.userData.birthday=n.birthday),this.ischangeHead?[2,!1]:(this.updateData(n),[2])):(this.native.presentAlert("请输入用户名!"),[2,!1])}))}))},n.prototype.updateData=function(n){var l=this;this.http.postformdataloading(this.http.editprofile,n).subscribe((function(e){console.log(e),l.isupdate=!0,l.userfn.upDataobj(n),l.isloading=!1,l.ischangeHeadend=!1,l.native.presentToast("修改成功")}),(function(n){l.isloading=!1}))},n.prototype.imgupload=function(n){var l=this;return new Promise((function(e,t){var u=new XMLHttpRequest;u.open("POST",l.http.domain+l.http.updateimg),u.onreadystatechange=function(n){if(4==u.readyState&&200==u.status){var l=JSON.parse(u.response);console.log(u.response),e(l.result.src)}},u.onerror=function(n){t(n)},u.send(n)}))},n.prototype.imgFrom=function(){return u.__awaiter(this,void 0,void 0,(function(){var n=this;return u.__generator(this,(function(l){switch(l.label){case 0:return[4,this.actionSheetController.create({buttons:[{text:"拍摄照片",handler:function(){console.log("Delete clicked"),n.native.getPictureByCamera().then((function(l){if(!l)return!1;n.changeHead(l)}))}},{text:"从手机相册选择",handler:function(){console.log("Share clicked"),n.native.getPictureByCamera({sourceType:0}).then((function(l){if(!l)return!1;n.changeHead(l)}))}},{text:"取消",role:"cancel",handler:function(){console.log("Cancel clicked")}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}}))}))},n.prototype.changeHead=function(n){return u.__awaiter(this,void 0,void 0,(function(){var l,e;return u.__generator(this,(function(t){switch(t.label){case 0:this.ischangeHead=!0,this.userData.headimg="../../../assets/load.jpg",t.label=1;case 1:return t.trys.push([1,3,,4]),(l=this.native.getImgbase64tofile(n,"userheaduid_"+this.userid)).append("nothumb","1"),l.append("ishead","1"),[4,this.imgupload(l)];case 2:return e=t.sent(),console.log(e),this.userData.headimg=e,this.ischangeHead=!1,this.ischangeHeadend=!0,this.isloading&&this.onSubmit(),[3,4];case 3:return t.sent(),this.native.presentAlert("图片上传失败，请重新选择!"),this.ischangeHead=!1,this.isloading&&(this.isloading=!1),[2,!1];case 4:return[2]}}))}))},n}(),s=function(){return function(){}}(),c=e("pMnS"),g=e("oBZk"),h=e("gIcY"),m=e("Ip0R"),f=e("n/qi"),p=t["ɵcrt"]({encapsulation:0,styles:[[""]],data:{}});function v(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(n,l){n(l,0,0,l.component.headimg)}))}function b(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"img",[],[[8,"src",4]],null,null,null,null)),t["ɵppd"](1,2)],null,(function(n,l){var e=l.component,u=t["ɵunv"](l,0,0,n(l,1,0,t["ɵnov"](l.parent.parent,0),e.userData.headimg,e.http.domain));n(l,0,0,u)}))}function C(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,"ion-button",[["color","success"],["expand","block"],["type","submit"]],null,null,null,g.gb,g.e)),t["ɵdid"](1,49152,null,0,i.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"],type:[3,"type"]},null),(n()(),t["ɵted"](-1,0,["提交"]))],(function(n,l){var e=l.component;n(l,1,0,"success",!t["ɵnov"](l.parent,2).form.valid||e.isloading,"block","submit")}),null)}function D(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,64,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"ionChange"],[null,"submit"],[null,"reset"]],(function(n,l,e){var u=!0,i=n.component;return"submit"===l&&(u=!1!==t["ɵnov"](n,2).onSubmit(e)&&u),"reset"===l&&(u=!1!==t["ɵnov"](n,2).onReset()&&u),"ngSubmit"===l&&(u=!1!==i.onSubmit()&&u),"ionChange"===l&&(u=!1!==i.changeData()&&u),u}),null,null)),t["ɵdid"](1,16384,null,0,h.u,[],null,null),t["ɵdid"](2,4210688,[["data",4]],0,h.l,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),t["ɵprd"](2048,null,h.b,null,[h.l]),t["ɵdid"](4,16384,null,0,h.k,[[4,h.b]],null,null),(n()(),t["ɵeld"](5,0,null,null,57,"ion-list",[],null,null,null,g.Fb,g.C)),t["ɵdid"](6,49152,null,0,i.P,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](7,0,null,0,14,"ion-item",[],null,null,null,g.Cb,g.x)),t["ɵdid"](8,49152,null,0,i.I,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](9,0,null,0,2,"ion-label",[],null,null,null,g.Db,g.B)),t["ɵdid"](10,49152,null,0,i.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](-1,0,["用户名"])),(n()(),t["ɵeld"](12,0,null,0,9,"ion-input",[["name","username"],["required",""],["text-end",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,i=n.component;return"ionBlur"===l&&(u=!1!==t["ɵnov"](n,15)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t["ɵnov"](n,15)._handleInputEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(i.userData.username=e)&&u),u}),g.yb,g.w)),t["ɵdid"](13,16384,null,0,h.p,[],{required:[0,"required"]},null),t["ɵprd"](1024,null,h.g,(function(n){return[n]}),[h.p]),t["ɵdid"](15,16384,null,0,i.Qb,[t.ElementRef],null,null),t["ɵprd"](1024,null,h.h,(function(n){return[n]}),[i.Qb]),t["ɵdid"](17,671744,null,0,h.m,[[2,h.b],[6,h.g],[8,null],[6,h.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["ɵprd"](2048,null,h.i,null,[h.m]),t["ɵdid"](19,16384,null,0,h.j,[[4,h.i]],null,null),t["ɵdid"](20,49152,null,0,i.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"],required:[1,"required"]},null),t["ɵdid"](21,16384,null,0,i.f,[t.ElementRef],null,null),(n()(),t["ɵeld"](22,0,null,0,10,"ion-item",[["detail",""]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.imgFrom()&&t),t}),g.Cb,g.x)),t["ɵdid"](23,49152,null,0,i.I,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{detail:[0,"detail"]},null),(n()(),t["ɵeld"](24,0,null,0,5,"ion-avatar",[["slot","end"]],null,null,null,g.db,g.b)),t["ɵdid"](25,49152,null,0,i.h,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵand"](16777216,null,0,1,null,v)),t["ɵdid"](27,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵand"](16777216,null,0,1,null,b)),t["ɵdid"](29,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵeld"](30,0,null,0,2,"ion-label",[],null,null,null,g.Db,g.B)),t["ɵdid"](31,49152,null,0,i.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](-1,0,["头像"])),(n()(),t["ɵeld"](33,0,null,0,11,"ion-item",[["detail",""]],null,null,null,g.Cb,g.x)),t["ɵdid"](34,49152,null,0,i.I,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{detail:[0,"detail"]},null),(n()(),t["ɵeld"](35,0,null,0,2,"ion-label",[],null,null,null,g.Db,g.B)),t["ɵdid"](36,49152,null,0,i.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](-1,0,["生日"])),(n()(),t["ɵeld"](38,0,null,0,6,"ion-datetime",[["Format","YYYY-MM-DD"],["cancelText","取消"],["displayFormat","YYYY-MM-DD"],["doneText","确定"],["name","birthday"],["pickerFormat","YYYY-MM-DD"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,i=n.component;return"ionBlur"===l&&(u=!1!==t["ɵnov"](n,39)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t["ɵnov"](n,39)._handleChangeEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(i.userData.birthday=e)&&u),u}),g.qb,g.o)),t["ɵdid"](39,16384,null,0,i.Pb,[t.ElementRef],null,null),t["ɵprd"](1024,null,h.h,(function(n){return[n]}),[i.Pb]),t["ɵdid"](41,671744,null,0,h.m,[[2,h.b],[8,null],[8,null],[6,h.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["ɵprd"](2048,null,h.i,null,[h.m]),t["ɵdid"](43,16384,null,0,h.j,[[4,h.i]],null,null),t["ɵdid"](44,49152,null,0,i.w,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{cancelText:[0,"cancelText"],displayFormat:[1,"displayFormat"],doneText:[2,"doneText"],max:[3,"max"],name:[4,"name"],pickerFormat:[5,"pickerFormat"]},null),(n()(),t["ɵeld"](45,0,null,0,17,"ion-item",[],null,null,null,g.Cb,g.x)),t["ɵdid"](46,49152,null,0,i.I,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](47,0,null,0,2,"ion-label",[],null,null,null,g.Db,g.B)),t["ɵdid"](48,49152,null,0,i.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](-1,0,["性别"])),(n()(),t["ɵeld"](50,0,null,0,12,"ion-select",[["interface","action-sheet"],["name","sex"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,i=n.component;return"ionBlur"===l&&(u=!1!==t["ɵnov"](n,51)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t["ɵnov"](n,51)._handleChangeEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(i.userData.sex=e)&&u),u}),g.Rb,g.O)),t["ɵdid"](51,16384,null,0,i.Pb,[t.ElementRef],null,null),t["ɵprd"](1024,null,h.h,(function(n){return[n]}),[i.Pb]),t["ɵdid"](53,671744,null,0,h.m,[[2,h.b],[8,null],[8,null],[6,h.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["ɵprd"](2048,null,h.i,null,[h.m]),t["ɵdid"](55,16384,null,0,h.j,[[4,h.i]],null,null),t["ɵdid"](56,49152,null,0,i.ob,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{interface:[0,"interface"],name:[1,"name"]},null),(n()(),t["ɵeld"](57,0,null,0,2,"ion-select-option",[["value","1"]],null,null,null,g.Qb,g.P)),t["ɵdid"](58,49152,null,0,i.pb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{value:[0,"value"]},null),(n()(),t["ɵted"](-1,0,["男"])),(n()(),t["ɵeld"](60,0,null,0,2,"ion-select-option",[["value","0"]],null,null,null,g.Qb,g.P)),t["ɵdid"](61,49152,null,0,i.pb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{value:[0,"value"]},null),(n()(),t["ɵted"](-1,0,["女"])),(n()(),t["ɵand"](16777216,null,null,1,null,C)),t["ɵdid"](64,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,l){var e=l.component;n(l,13,0,""),n(l,17,0,"username",e.userData.username),n(l,20,0,"username",""),n(l,23,0,""),n(l,27,0,e.ischangeHead),n(l,29,0,!e.ischangeHead),n(l,34,0,""),n(l,41,0,"birthday",e.userData.birthday),n(l,44,0,"取消","YYYY-MM-DD","确定",e.maxyear,"birthday","YYYY-MM-DD"),n(l,53,0,"sex",e.userData.sex),n(l,56,0,"action-sheet","sex"),n(l,58,0,"1"),n(l,61,0,"0"),n(l,64,0,!t["ɵnov"](l,2).form.pristine&&!e.isupdate||e.ischangeHeadend)}),(function(n,l){n(l,0,0,t["ɵnov"](l,4).ngClassUntouched,t["ɵnov"](l,4).ngClassTouched,t["ɵnov"](l,4).ngClassPristine,t["ɵnov"](l,4).ngClassDirty,t["ɵnov"](l,4).ngClassValid,t["ɵnov"](l,4).ngClassInvalid,t["ɵnov"](l,4).ngClassPending),n(l,12,0,t["ɵnov"](l,13).required?"":null,t["ɵnov"](l,19).ngClassUntouched,t["ɵnov"](l,19).ngClassTouched,t["ɵnov"](l,19).ngClassPristine,t["ɵnov"](l,19).ngClassDirty,t["ɵnov"](l,19).ngClassValid,t["ɵnov"](l,19).ngClassInvalid,t["ɵnov"](l,19).ngClassPending),n(l,38,0,t["ɵnov"](l,43).ngClassUntouched,t["ɵnov"](l,43).ngClassTouched,t["ɵnov"](l,43).ngClassPristine,t["ɵnov"](l,43).ngClassDirty,t["ɵnov"](l,43).ngClassValid,t["ɵnov"](l,43).ngClassInvalid,t["ɵnov"](l,43).ngClassPending),n(l,50,0,t["ɵnov"](l,55).ngClassUntouched,t["ɵnov"](l,55).ngClassTouched,t["ɵnov"](l,55).ngClassPristine,t["ɵnov"](l,55).ngClassDirty,t["ɵnov"](l,55).ngClassValid,t["ɵnov"](l,55).ngClassInvalid,t["ɵnov"](l,55).ngClassPending)}))}function R(n){return t["ɵvid"](0,[t["ɵpid"](0,f.a,[]),(n()(),t["ɵeld"](1,0,null,null,12,"ion-header",[["mode","ios"]],null,null,null,g.tb,g.r)),t["ɵdid"](2,49152,null,0,i.C,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{mode:[0,"mode"]},null),(n()(),t["ɵeld"](3,0,null,0,10,"ion-toolbar",[["mode","ios"]],null,null,null,g.dc,g.bb)),t["ɵdid"](4,49152,null,0,i.Db,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{mode:[0,"mode"]},null),(n()(),t["ɵeld"](5,0,null,0,5,"ion-buttons",[["slot","start"]],null,null,null,g.hb,g.f)),t["ɵdid"](6,49152,null,0,i.m,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](7,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.goBack()&&t),t}),g.gb,g.e)),t["ɵdid"](8,49152,null,0,i.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](9,0,null,0,1,"ion-icon",[["mode","ios"],["name","arrow-back"]],null,null,null,g.ub,g.s)),t["ɵdid"](10,49152,null,0,i.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{mode:[0,"mode"],name:[1,"name"]},null),(n()(),t["ɵeld"](11,0,null,0,2,"ion-title",[],null,null,null,g.bc,g.Z)),t["ɵdid"](12,49152,null,0,i.Bb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](-1,0,["修改资料"])),(n()(),t["ɵeld"](14,0,null,null,4,"ion-content",[["padding",""]],null,null,null,g.pb,g.n)),t["ɵdid"](15,49152,null,0,i.v,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),t["ɵdid"](16,16384,null,0,i.f,[t.ElementRef],null,null),(n()(),t["ɵand"](16777216,null,0,1,null,D)),t["ɵdid"](18,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,l){var e=l.component;n(l,2,0,"ios"),n(l,4,0,"ios"),n(l,10,0,"ios","arrow-back"),n(l,18,0,e.userData)}),null)}function y(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"app-edmit-user",[],null,null,null,R,p)),t["ɵdid"](1,114688,null,0,d,[i.Jb,o.a,a.a,i.a,r.a],null,null)],(function(n,l){n(l,1,0)}),null)}var E=t["ɵccf"]("app-edmit-user",d,y,{},{},[]),N=e("iTUp"),I=e("ZYCi");e.d(l,"EdmitUserPageModuleNgFactory",(function(){return Z}));var Z=t["ɵcmf"](s,[],(function(n){return t["ɵmod"]([t["ɵmpd"](512,t.ComponentFactoryResolver,t["ɵCodegenComponentFactoryResolver"],[[8,[c.a,E]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["ɵmpd"](4608,m.NgLocalization,m.NgLocaleLocalization,[t.LOCALE_ID,[2,m["ɵangular_packages_common_common_a"]]]),t["ɵmpd"](4608,h.s,h.s,[]),t["ɵmpd"](4608,i.c,i.c,[t.NgZone,t.ApplicationRef]),t["ɵmpd"](4608,i.Ib,i.Ib,[i.c,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](4608,i.Mb,i.Mb,[i.c,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](1073742336,m.CommonModule,m.CommonModule,[]),t["ɵmpd"](1073742336,h.r,h.r,[]),t["ɵmpd"](1073742336,h.d,h.d,[]),t["ɵmpd"](1073742336,i.Fb,i.Fb,[]),t["ɵmpd"](1073742336,N.a,N.a,[]),t["ɵmpd"](1073742336,I.p,I.p,[[2,I.u],[2,I.n]]),t["ɵmpd"](1073742336,s,s,[]),t["ɵmpd"](1024,I.l,(function(){return[[{path:"",component:d}]]}),[])])}))},"n/qi":function(n,l,e){"use strict";e.d(l,"a",(function(){return t}));var t=function(){function n(){}return n.prototype.transform=function(n,l){return console.log(l),n?n.startsWith("http")||n.startsWith("data:image")||n.startsWith("file:///")||n.startsWith("cdvfile://")?n:n.startsWith("/mobile")&&l&&l.endsWith("mobile/")?l+n.substring(7):n.startsWith("./../")?l+n.substring(5):l+n:"../../assets/mrtx.png"},n}()}}]);